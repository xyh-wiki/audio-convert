:3000 {
  encode gzip
  root * /app/dist

  header {
    Cross-Origin-Opener-Policy "same-origin"
    Cross-Origin-Embedder-Policy "require-corp"
  }

  @wasm {
    path *.wasm
  }
  header @wasm {
    Content-Type "application/wasm"
  }

  @worker {
    path *.worker.js
  }
  header @worker {
    Content-Type "application/javascript"
  }

  @versioned {
    path /assets/*
  }
  header @versioned {
    Cache-Control "public, max-age=31536000, immutable"
  }

  @html {
    path *.html
  }
  header @html {
    Cache-Control "no-cache, no-store, must-revalidate"
  }

  try_files {path} /index.html
  file_server
}
